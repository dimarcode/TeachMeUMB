{% extends "base.html" %}
{% block content %}
  <div class="container mt-4">
    <h2>Add Weekly Availability</h2>
    <form method="POST">
      {{ form.hidden_tag() }}
      <div class="form-group">
        {{ form.date.label }}
        {{ form.date(class="form-control") }}
      </div>
      <div class="form-group">
        {{ form.start_time.label }}
        {{ form.start_time(class="form-control") }}
      </div>
      <div class="form-group">
        {{ form.end_time.label }}
        {{ form.end_time(class="form-control") }}

      </div>
      <button type="submit" class="btn btn-success">{{ form.submit.label }}</button>
    </form>

    <hr>

    <h4>Your Current Slots</h4>
    <ul class="list-group">
        {% for slot in slots %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            {{ slot.date }} â€” {{ slot.time.strftime('%I:%M %p') }}
            {% if slot.is_booked %}
              <span class="text-danger">Booked</span>
            {% else %}
              <span class="text-success">Open</span>
            {% endif %}
          </div>
          {% if not slot.is_booked %}
            <a href="{{ url_for('delete_availability', slot_id=slot.id) }}" class="btn btn-sm btn-outline-danger">Remove</a>
          {% endif %}
        </li>
      {% endfor %}
      
    </ul>
  </div>
{% endblock %}
